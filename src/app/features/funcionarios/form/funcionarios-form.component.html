<div
  class="form-principal"
  [ngClass]="sidebarAberta ? 'com-sidebar' : 'sem-sidebar'"
  *ngIf="idiomaService.textos$ | async as textos">

  <h2 id="title">{{ id ? textos.form.edit_title : textos.form.new_title }}</h2>

  <div class="progress-header">
    <div class="circle" [class.active]="currentStep >= 1">1</div>
    <div class="line" [class.active]="currentStep > 1"></div>
    <div class="circle" [class.active]="currentStep >= 2">2</div>
    <div class="line" [class.active]="currentStep > 2"></div>
    <div class="circle" [class.active]="currentStep >= 3">3</div>
    <div class="line" [class.active]="currentStep > 3"></div>
    <div class="circle" [class.active]="currentStep >= 4">4</div>
  </div>

  <form #funcForm="ngForm" (ngSubmit)="salvarFuncionario()">

    <fieldset *ngIf="currentStep === 1">
      <legend>{{ textos.form.personal_data }}</legend>
      <label>{{ textos.employees.name }}:</label>
      <input [(ngModel)]="funcionario.nome" name="nome" required #nome="ngModel" />
      <label>{{ textos.employees.role }}:</label>
      <input [(ngModel)]="funcionario.cargo" name="cargo" required #cargo="ngModel"/>
      <label>{{ textos.employees.cpf }}:</label>
      <input [(ngModel)]="funcionario.cpf" name="cpf" required #cpf="ngModel"/>
      <label>{{ textos.employees.rg }}:</label>
      <input [(ngModel)]="funcionario.rg" name="rg" required #rg="ngModel"/>
      <label>{{ textos.employees.birth }}:</label>
      <input type="date" [(ngModel)]="funcionario.dataNascimento" name="dataNascimento" required #dataNascimento="ngModel"/>
      <label>{{ textos.employees.email }}:</label>
      <input type="email" [(ngModel)]="funcionario.email" name="email" required #email="ngModel"/>
      <label>{{ textos.employees.phone }}:</label>
      <input [(ngModel)]="funcionario.telefone" name="telefone" required #telefone="ngModel"/>
    </fieldset>

    <fieldset *ngIf="currentStep === 2">
      <legend>{{ textos.form.contract_data }}</legend>
      <label>{{ textos.employees.salary }}:</label>
      <input type="number" [(ngModel)]="funcionario.salario" name="salario" required #salario="ngModel"/>
      <label>{{ textos.employees.benefits }}:</label>
      <input [(ngModel)]="funcionario.beneficios" name="beneficios" required #beneficios="ngModel"/>
      <label>{{ textos.employees.contract_type }}:</label>
      <input [(ngModel)]="funcionario.tipoContrato" name="tipoContrato" required #tipoContrato="ngModel"/>
      <label>{{ textos.employees.hiring }}:</label>
      <input type="date" [(ngModel)]="funcionario.dataContratacao" name="dataContratacao" required #dataContratacao="ngModel"/>
    </fieldset>

    <fieldset *ngIf="currentStep === 3">
      <legend>{{ textos.form.education_data }}</legend>
      <label>{{ textos.employees.education }}:</label>
      <input [(ngModel)]="funcionario.formacao" name="formacao" required #formacao="ngModel"/>
      <label>{{ textos.employees.courses }}:</label>
      <input [(ngModel)]="funcionario.cursos" name="cursos" required #cursos="ngModel"/>
    </fieldset>

    <fieldset *ngIf="currentStep === 4">
      <legend>{{ textos.form.address_data }}</legend>
      <label>{{ textos.employees.address }}:</label>
      <input [(ngModel)]="funcionario.endereco" name="endereco" required #endereco="ngModel"/>
      <label>{{ textos.employees.city }}:</label>
      <input [(ngModel)]="funcionario.cidade" name="cidade" required #cidade="ngModel"/>
      <label>{{ textos.employees.state }}:</label>
      <input [(ngModel)]="funcionario.estado" name="estado" required #estado="ngModel"/>
      <label>{{ textos.employees.cep }}:</label>
      <input [(ngModel)]="funcionario.cep" name="cep" required #cep="ngModel"/>
    </fieldset>

  </form>

  <div class="buttons-bottom">
    <button type="button" (click)="prevStep()" [disabled]="currentStep === 1">Anterior</button>
    <button type="button" (click)="nextStep(funcForm)" *ngIf="currentStep < 4">Pr√≥ximo</button>
    <button type="submit" (click)="salvarFuncionario()" *ngIf="currentStep === 4">{{ textos.form.save_button }}</button>
  </div>

  <div class="toast-container">
    <div class="toast" *ngIf="mensagem" [class.success]="sucesso" [class.error]="!sucesso">
      {{ mensagem }}
    </div>
  </div>
</div>
